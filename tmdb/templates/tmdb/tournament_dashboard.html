{% extends "tmdb/base_tournament_dashboard.html" %}

{% block content %}
  <h1>{{tournament}}</h1>
    <table class="table table-striped">
      <thead>
        <tr>
          <th> Division </th>
          <th> Progress </th>
          <th> Teams </th>
          <th> Seedings </th>
          <th> Bracket </th>
          <th> Lock Registration </th>
        </tr>
      </thead>
      <tbody>
        {% for tournament_div in tournament_divisions %}
        <tr>
        <td>{{tournament_div}}</td>
        <td> Not started </td>
        <td> <a href="{% url 'tmdb:team_list' tournament_div.tournament.slug tournament_div.division.slug %}">Teams</a> </td>
        <td> <a href="{% url 'tmdb:division_seedings' tournament_div.tournament.slug tournament_div.division.slug %}">Create matches</a> </td>
        <td> <a href="{% url 'tmdb:bracket' tournament_div.tournament.slug tournament_div.division.slug %}">Bracket</a> </td>
        {% if tournament_div.locked_from_new_teams %}
        <td> <a href="{% url 'tmdb:unlock_team_registration' tournament_div.tournament.slug tournament_div.division.slug %}">Unlock</a> </td>
        {% else %}
        <td> <a href="{% url 'tmdb:lock_team_registration' tournament_div.tournament.slug tournament_div.division.slug %}">Lock</a> </td>
        {% endif %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  <hr/>
  <h3>Matches (based on divisions)</h3>
  {% include "tmdb/snippets/match_table_component.html" %}

  <hr/>
  {% include "tmdb/ring_table_component.html" %}

{% endblock %}

{% block script %}
{% load static %}
    <script src="{% static 'js/match_websocket.js' %}"></script>
{% endblock %}
