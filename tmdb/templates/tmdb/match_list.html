{% extends "tmdb/base_tournament_dashboard.html" %}

{% block content %}
  {% for division, team_matches in team_matches %}
  <h2>Matches in {{division}} division</h2>
    {% if team_matches %}
    <div>
      <p><a href="{%url 'tmdb:match_sheet' division.tournament.slug division.division.slug %}"><input class="btn btn-primary" type="button" value="Print All Match Sheets"></input></a></p>
    </div>
    <div class="form-horizontal">
      <table class="table table-striped match_table table">
        <thead>
          <tr>
            <th>Match No.</th>
            <th>Round</th>
            <th>Blue Team</th>
            <th>Red Team</th>
            <th>Ring No.</th>
            <th>Winning Team</th>
            <th> Status </th>
            <th> Modify </th>
            <th>Match Sheet</th>
          </tr>
        </thead>
        <tbody>
          {% for team_match in team_matches %}
          <tr>
            <td>{{team_match.number}}</td>
            <td>{{team_match.round_str}}</td>
            <td>{{team_match.blue_team|default_if_none:""}}</td>
            <td>{{team_match.red_team|default_if_none:""}}</td>
            <td>{{team_match.ring_number|default_if_none:""}}</td>
            <td>{{team_match.winning_team|default_if_none:""}}</td>
            <td>{{team_match.status|default_if_none:""}}</td>
            <td><a class="btn btn-primary" href="{%url 'tmdb:update_teammatch_status' tournament.slug team_match.division.division.slug team_match.number %}">Update Status</a></td>
            <td><a class="btn btn-primary" href="{%url 'tmdb:match_sheet' team_match.division.tournament.slug team_match.division.division.slug team_match.number %}">Print</a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
      <p>No matches are available</p>
    {% endif %}
  {% endfor %}

{% endblock %}
