{% extends "tmdb/base.html" %}

{% block main-content %}
  <div class="row page-header">
    <h1 class="col-sm-5 col-md-5"> Tournament Manager</h1>
    <a class="col-sm-offset-2 col-sm-3 col-md-offset-3 col-md-3 btn btn-primary" href="{% url 'tmdb:tournament_create' %}"> Create New Tournament</a>
  </div>
  <p>Select from one of the tournaments below, or <a href="{% url 'tmdb:tournament_create' %}">create a new one.</a></p>
  <table class="table table-striped">
    <thead>
      <th>Tournament Location</th>
      <th>Date</th>
      <th>Details</th>
      <th>Schools</th>
      <th>Delete</th>
    </thead>
  {% if tournaments %}
    {% for tournament in tournaments %}
    <tr>
      <td><a href="{% url 'tmdb:tournament_dashboard' tournament.slug %}">{{tournament.location}}</a></td>
      <td>{{tournament.date}} </td>
      <td><a class="btn btn-default" href="{% url 'tmdb:tournament_edit' tournament.slug %}">Edit</a></td>
      <td>
        {% if tournament.imported %}
          <a class="btn btn-default" href="{% url 'tmdb:tournament_schools' tournament.slug %}">Import</a>
        {% else %}
          <p>Need to add schools.</p>
        {% endif %}
      </td>
      <td>
        <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#confirmDeleteTournamentModal{{tournament.id}}">Delete</button>
        <!-- Modal to confirm that you want to delete -->
        <div class="modal" id="confirmDeleteTournamentModal{{tournament.id}}" role="dialog" tabindex="-1">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="deleteTournamentModalLabel">Delete Tournament</h4>
              </div>
              <div class="modal-body">
                <p> Are you sure you want to delete this tournament ({{tournament.location}} {{tournament.date}})? </p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger">Delete Tournament</button>
              </div>
            </div>
          </div>
        </div>
      </td>
    </tr>
    {% endfor %}
  {% else %}
  <tr><td>There are no existing tournaments in the database.</td></tr>
  {% endif %}
  </table>

{% endblock %}


